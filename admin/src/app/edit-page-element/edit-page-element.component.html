<div *ngIf="element" [formGroup]="elementGroup">
  <!-- SectionElement -->
  <div class="mb-5 pl-3 left-border" *ngIf="isSection(element)">
    <biom-heading [level]="level" [title]="element.description"></biom-heading>
    <div *ngFor="let sectionElement of element.elements">
      <biom-edit-page-element
        [formControlName]="sectionElement.name"
        [submitted]="isSubmitted"
        [elementModel]="getElementModel(sectionElement.name)"
        [level]="level + 1"
      ></biom-edit-page-element>
    </div>
  </div>
  <!-- ListUnitElement -->
  <div *ngIf="isListUnit(element)">
    <div *ngFor="let unitElement of element.elements">
      <biom-edit-page-element
        [formControlName]="unitElement.name"
        [submitted]="isSubmitted"
        [elementModel]="getElementModel(unitElement.name)"
        [level]="level + 1"
      ></biom-edit-page-element>
    </div>
  </div>
  <!-- ListElement -->
  <div *ngIf="isList(element)" class="mb-5 pl-3 left-border">
    <biom-heading [level]="level" [title]="element.description"></biom-heading>
    <div formArrayName="elements">
      <div *ngFor="let listElement of element.elements; index as unitIndex" class="mb-2 unit">
        <biom-edit-page-element
          [formControlName]="unitIndex"
          [submitted]="isSubmitted"
          [elementModel]="getElementModel(listElement.name)"
          [level]="level + 1"
        ></biom-edit-page-element>
        <button type="button" class="btn btn-outline-danger remove-unit" (click)="removeListUnit(element, unitIndex)">
          Enlever l'élément de la liste
        </button>
      </div>
    </div>
    <val-errors [control]="elementsArray" label="La liste">
      <ng-template valError="atLeastOne">La liste doit contenir au moins un élément</ng-template>
      <ng-template valError="invalidElement">La liste doit contenir des éléments valides</ng-template>
    </val-errors>
    <button id="add-unit" type="button" class="btn btn-outline-primary" (click)="addListUnit(element)">
      Ajouter un élément à la liste
    </button>
  </div>
  <!-- TextElement -->
  <div *ngIf="isText(element)" class="mb-2">
    <biom-edit-text-element [submitted]="isSubmitted" formControlName="text"></biom-edit-text-element>
  </div>
  <!-- LinkElement -->
  <div *ngIf="isLink(element)" class="mb-2">
    <biom-edit-link-element [submitted]="isSubmitted" formControlName="link"></biom-edit-link-element>
  </div>
  <!-- ImageElement -->
  <div *ngIf="isImage(element)" class="mb-2">
    <biom-edit-image-element [submitted]="isSubmitted" formControlName="image"></biom-edit-image-element>
  </div>
</div>
